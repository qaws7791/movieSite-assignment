<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
    <script
      src="https://kit.fontawesome.com/4063cf8443.js"
      crossorigin="anonymous"
    ></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css"
    />
    <link rel="stylesheet" href="./styles/swiper.css" />
    <link rel="stylesheet" href="./styles/style.css" />
  </head>
  <body>
    <div class="container">
      <nav class="nav hide">
        <button class="iconButton navCloseButton">
          <i class="fa-solid fa-arrow-left" style="color: #dedede"></i>
        </button>
        <p class="nav__title">menus</p>
        <ul>
          <li>
            <a href="/" class="navItem">
              <div>
                <i class="fa-solid fa-house navItem__icon"></i>
              </div>
              <div class="navItem__name">홈</div>
            </a>
          </li>
          <li>
            <a href="#/discover" class="navItem">
              <div>
                <i class="fa-solid fa-magnifying-glass navItem__icon"></i>
              </div>
              <div class="navItem__name">찾기</div>
            </a>
          </li>
        </ul>
      </nav>
      <div class="main">
        <header class="header">
          <div class="header_wrapper">
            <div class="header__title">
              <div>
                <button class="iconButton navOpenButton">
                  <i class="fa-solid fa-bars" style="color: #dedede"></i>
                </button>
              </div>
              <a href="/">
                <h1>Movies</h1>
              </a>
            </div>
            <div class="searchBar hide">
              <button class="iconButton searchCloseButton">
                <i class="fa-solid fa-xmark" style="color: #dedede"></i>
              </button>
              <div>
                <input
                  type="text"
                  name="inputSearch"
                  id="inputSearch"
                  class="input"
                />
                <button
                  onclick="handleSearchSubmit()"
                  class="searchSubmitButton"
                >
                  Search
                </button>
              </div>
            </div>
            <button class="iconButton searchOpenButton">
              <i
                class="fa-solid fa-magnifying-glass"
                style="color: #dedede"
              ></i>
            </button>
          </div>
        </header>
        <div></div>
        <main class="content" id="content"></main>
      </div>
    </div>
    <script>
      $navCloseButtons = document.querySelector(".navCloseButton");
      $navOpenButtons = document.querySelector(".navOpenButton");
      $inputSearch = document.querySelector("#inputSearch");
      $nav = document.querySelector(".nav");
      $navSpace = document.querySelector(".navSpace");
      $navItems = document.querySelectorAll(".navItem");
      $searchOpenButton = document.querySelector(".searchOpenButton");
      $searchCloseButton = document.querySelector(".searchCloseButton");
      $searchBar = document.querySelector(".searchBar");

      window.addEventListener("resize", onResizeWindow);
      document.addEventListener("DOMContentLoaded", onDOMLoad);
      $navOpenButtons.addEventListener("click", openNav);
      $navCloseButtons.addEventListener("click", closeNav);
      $searchOpenButton.addEventListener("click", openSearchBar);
      $searchCloseButton.addEventListener("click", closeSearchBar);
      $inputSearch.addEventListener("keyup", submitDetectEnter);

      function onDOMLoad() {
        $inputSearch.focus();
      }

      function onResizeWindow() {
        if (window.innerWidth <= 600) {
          closeSearchBar();
        } else {
          openSearchBar();
        }
      }

      function openSearchBar() {
        $searchBar.classList.remove("hide");
      }

      function closeSearchBar() {
        $searchBar.classList.add("hide");
      }

      function openNav() {
        $nav.classList.remove("hide");
      }
      function closeNav() {
        $nav.classList.add("hide");
      }
      $navItems.forEach((navItem) => {
        navItem.addEventListener("click", closeNav);
      });

      function handleSearchSubmit() {
        console.log($inputSearch.value);
        window.location.href = `/#/search/${$inputSearch.value}`;
      }

      function submitDetectEnter(e) {
        if (e.keyCode === 13) handleSearchSubmit();
      }
      onResizeWindow();
    </script>
    <script src="./scripts/app.js" type="module"></script>
  </body>
</html>
